<?php
 namespace app\index\controller; use app\index\service\EventLogs; use think\Controller; use think\Db; use think\Log; class EventLog extends Common { public function getList($entity = 0, $search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS) { goto vShSE; rBdaU: if (!empty($total)) { goto K31OL; } goto x_pmp; nn_zO: if (!$entity) { goto gF2Db; } goto zybPX; Pwp7O: $total = Db::table("\145\166\145\x6e\164\x5f\154\x6f\x67\x73")->where($where)->count(); goto rBdaU; dDwzE: EventLogs::showLogs($rows); goto CRmhA; YBBl0: gF2Db: goto Pwp7O; x_pmp: return []; goto NrXbm; vShSE: $where = []; goto nn_zO; CRmhA: return ["\164\x6f\164\x61\154" => $total, "\x72\x6f\167\x73" => $rows]; goto OJrY_; coQGP: $rows = Db::table("\145\166\x65\156\x74\x5f\154\157\147\x73")->where($where)->page($page, $rows)->order("\x69\x64\x20\x64\145\163\143")->select(); goto dDwzE; NrXbm: K31OL: goto coQGP; zybPX: $where["\x65\x6e\x74\151\x74\x79\x5f\x74\x79\160\145"] = $entity; goto YBBl0; OJrY_: } public function globals($entity = 0, $search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS) { goto Af0kh; KP9Ak: return json($this->getList($entity, $search, $page, $rows)); goto QGr2n; QGr2n: E2fRL: goto xB5lm; Af0kh: if (!$this->request->isPost()) { goto E2fRL; } goto KP9Ak; xB5lm: return $this->fetch(); goto b4jxh; b4jxh: } }
