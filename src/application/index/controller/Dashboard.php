<?php
 namespace app\index\controller; use think\Controller; use think\Log; use think\Debug; use think\Request; use think\Db; use app\Defs; use app\index\Defs as IndexDefs; use app\index\logic\Dashboard as DashboardLogic; class Dashboard extends Common { public function statistic() { goto mFi4y; CNRz8: $this->assign("\142\151\x6e\144\x56\141\154\x75\145\x73", $bindValues); goto MhJ2i; mFi4y: $dashboardLogic = DashboardLogic::newObj(); goto GduN1; GduN1: $bindValues = ["\x73\164\x61\164\x69\163\x74\x69\x63" => $dashboardLogic->loadStatistic()]; goto CNRz8; MhJ2i: return $this->fetch(); goto KuEH8; KuEH8: } public function trend($beginDate = null, $endDate = null) { goto tIoA8; P5PCc: $this->assign(["\142\x65\147\151\156\104\x61\164\x65" => $beginDate, "\x65\156\144\104\141\164\145" => $endDate]); goto azaMW; NL10l: gGpDr: goto cpzCt; zOAEB: $dates[] = $beginDate; goto u0ex1; GypSn: return json(["\x64\141\x74\145\x73" => $dates, "\163\x65\x6e\x74\x53\x75\x62\163\143\x72\x69\x62\x65\162\163" => $sentSubscribers]); goto TqvEA; tIoA8: if (!request()->isGet()) { goto NoIdT; } goto g997k; zcl65: $beginDate = date("\131\x2d\155\x2d\x64", strtotime($beginDate . "\40\53\x31\40\144\141\171")); goto zVS7c; ve1NG: if (!($beginDate <= $endDate)) { goto vyfa2; } goto zOAEB; g997k: $endDate = date("\131\55\155\x2d\x64"); goto A7kWY; u0ex1: $sentSubscribers[] = Db::table("\143\x61\x6d\160\141\151\147\156\137\163\x75\142\163\x63\162\151\x62\x65\162\163")->where("\x44\x41\x54\x45\137\x46\117\x52\x4d\x41\x54\50\145\156\x74\x65\162\145\144\54\x27\45\131\55\45\155\55\45\144\47\51\x3d\47{$beginDate}\x27")->count(); goto zcl65; FWeyf: return json(["\163\x65\156\x74\x53\x75\x62\163\143\162\151\142\145\162\163" => $sentSubscribers]); goto NL10l; LQHA0: $sentSubscribers = []; goto MnH6L; A7kWY: $beginDate = date("\x59\55\155\x2d\144", strtotime($endDate . "\x20\x2d\61\x20\155\157\156\x74\x68")); goto P5PCc; cpzCt: swKyM: goto ve1NG; MnH6L: if (!(empty($beginDate) || empty($endDate) || $beginDate > $endDate)) { goto gGpDr; } goto FWeyf; azaMW: return $this->fetch(); goto Wa3D3; oZrCI: $dates = []; goto LQHA0; QFvxd: vyfa2: goto GypSn; Wa3D3: NoIdT: goto oZrCI; zVS7c: goto swKyM; goto QFvxd; TqvEA: } public function events($page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = '', $order = '') { goto kwWYL; sRQzf: $urlHrefs = ["\x65\x76\145\x6e\164\163" => url("\x69\x6e\144\x65\170\x2f\104\141\163\150\142\157\141\x72\144\57\x65\x76\145\x6e\x74\163")]; goto Nz52C; kwWYL: if (!request()->isGet()) { goto N_BZe; } goto sRQzf; Nz52C: $this->assign("\165\162\154\110\x72\145\146\163", $urlHrefs); goto LHt7O; X2KzX: N_BZe: goto n3650; n3650: $dashboardLogic = DashboardLogic::newObj(); goto LXYzD; LHt7O: return $this->fetch("\145\x76\145\x6e\x74\x73"); goto X2KzX; LXYzD: return json($dashboardLogic->loadEvents($page, $rows, $sort, $order)); goto aAWoz; aAWoz: } }
