<?php
 namespace app\index\controller; use app\index\service\View; use think\Db; use think\Log; class AuditLogs extends Common { public function index($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = '', $order = '') { goto ZTJUu; ZTJUu: if (!request()->isGet()) { goto POyQN; } goto MVyYW; MVIC_: vtKy6: goto fPHmC; KUMnf: $records = Db::table("\141\165\144\x69\x74\x5f\154\x6f\x67\163")->alias("\114")->join("\x41\144\x6d\151\156\x73\40\101", "\114\56\143\x68\x61\156\x67\145\144\x5f\x62\x79\75\101\x2e\x61\x64\155\x69\x6e\x5f\151\144", "\114\105\x46\124")->where($conditions)->page($page, $rows)->order($order)->field("\114\x2e\52\54\x20\x41\x2e\162\x65\141\154\156\141\155\145")->select(); goto eAAqX; qxW_v: $conditions["\114\x2e\x64\x65\163\143"] = ["\154\x69\x6b\x65", "\x25" . $search["\153\x65\171\x77\x6f\x72\x64"] . "\45"]; goto PaAFc; fPHmC: $conditions = []; goto Li9K4; kBrmk: $this->assign("\165\x72\x6c\x48\162\x65\x66\x73", $urlHrefs); goto LLJ8T; kIkqw: if ($sort == "\145\x6e\164\145\x72\145\144") { goto eAXM7; } goto cNURD; MVyYW: $urlHrefs = ["\151\x6e\x64\145\170" => url("\151\156\144\145\170\57\101\x75\x64\x69\x74\114\x6f\147\163\57\x69\156\x64\x65\x78")]; goto kBrmk; KlKYR: $order = "\114\56\145\156\164\145\162\145\x64\x20" . $order; goto MVIC_; FlS3a: goto vtKy6; goto zNIUv; zNIUv: eAXM7: goto KlKYR; cNURD: $order = "\x4c\56\x69\144\40\144\x65\163\x63"; goto FlS3a; PaAFc: f1Uiw: goto VBXVi; eAAqX: return json(["\164\157\164\x61\x6c" => $totalCount, "\162\x6f\167\163" => $records]); goto SMBsH; LLJ8T: return $this->fetch(); goto IOExU; IOExU: POyQN: goto kIkqw; Li9K4: if (emptyInArray($search, "\x6b\x65\x79\x77\x6f\x72\x64")) { goto f1Uiw; } goto qxW_v; VBXVi: $totalCount = Db::table("\141\165\x64\x69\x74\x5f\154\157\x67\x73")->alias("\114")->where($conditions)->count(); goto KUMnf; SMBsH: } public function view($model, $record_id, $field = '') { goto YrGND; S2_6w: return $this->fetch('', ["\x72\157\167\163" => $rows]); goto u6aiq; YrGND: $where = ["\x6c\x2e\155\157\144\145\x6c" => $model, "\154\x2e\x72\145\x63\157\x72\144\137\151\x64" => $record_id]; goto G1Gti; E1wJR: $rows = []; goto GtW8K; DuJ3p: $where["\154\56\146\151\x65\x6c\x64\x73"] = ["\154\x69\x6b\x65", "\45\174" . $field . "\174\x25"]; goto StHjC; StHjC: iyadn: goto r7luc; r7luc: $rows = Db::table("\x61\x75\x64\151\x74\x5f\x6c\x6f\147\x73")->alias("\154")->join("\141\x64\155\x69\x6e\x73\40\x61", "\x61\56\x61\144\155\x69\x6e\x5f\151\x64\x3d\154\56\x63\x68\x61\156\147\x65\x64\137\x62\x79")->field("\154\56\x2a\54\141\x2e\162\x65\141\154\156\141\x6d\145")->where($where)->order("\x6c\56\x69\144\x20\144\145\163\143")->select(); goto h4R7C; GtW8K: WdOYr: goto S2_6w; h4R7C: if (!empty($rows)) { goto WdOYr; } goto E1wJR; G1Gti: if (!$field) { goto iyadn; } goto DuJ3p; u6aiq: } }
