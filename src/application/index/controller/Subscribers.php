<?php
 namespace app\index\controller; use think\Url; use think\Request; use think\Log; use think\Debug; use think\Db; use app\index\Defs as IndexDefs; use app\index\logic\Subscribers as SubscribersLogic; use app\index\logic\Lists as ListsLogic; use app\index\model\ListSubscribers as ListSubscribersModel; class Subscribers extends Common { public function subscribers($listId = 0, $search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = '', $order = '') { goto Orywl; jJSGv: Rrvd7: goto nyb8M; Orywl: if (!request()->isGet()) { goto MZ1Wh; } goto dTobp; RxrMZ: $listInfos = $listsLogic->getList($listId); goto asOfL; EAEf7: return $this->fetch("\x63\x6f\x6d\x6d\x6f\x6e\x2f\x65\162\162\x6f\x72"); goto jJSGv; CnHmv: $listsLogic = new ListsLogic(); goto Cf9ff; qzl_3: $subscribersLogic = new SubscribersLogic(); goto eoR7J; Cf9ff: $otherLists = $listsLogic->getOtherLists($listId); goto RxrMZ; N2x_z: MZ1Wh: goto qzl_3; W2Xe1: $this->assign("\x62\x69\156\x64\x56\x61\x6c\x75\x65\163", $bindValues); goto naXDP; dTobp: $urlHrefs = array("\x73\x75\x62\163\143\162\x69\142\145\x72\x73" => url("\151\x6e\144\145\x78\57\x53\x75\x62\163\143\162\x69\x62\x65\x72\x73\57\x73\165\x62\x73\143\x72\151\x62\x65\162\x73", ["\154\151\163\x74\111\x64" => $listId]), "\163\x75\x62\x73\143\x72\x69\142\x65\x72\x73\101\x64\x64" => url("\151\x6e\144\145\170\x2f\x53\165\x62\x73\x63\x72\151\x62\x65\x72\163\57\x73\165\142\x73\x63\x72\151\142\x65\162\x73\x41\144\144", ["\154\151\x73\164\x49\x64" => $listId]), "\x73\165\142\163\x63\162\151\142\145\x72\x73\x45\144\151\164" => url("\151\x6e\144\145\170\57\x53\165\x62\163\143\x72\151\x62\x65\x72\x73\x2f\163\x75\x62\x73\143\162\151\x62\x65\162\163\105\144\151\x74", ["\x6c\x69\x73\164\x49\x64" => $listId]), "\163\165\x62\x73\143\x72\151\x62\145\162\163\x52\x65\155\157\x76\x65" => url("\151\x6e\144\x65\170\57\123\165\x62\163\143\162\x69\x62\145\x72\x73\x2f\163\165\142\163\143\162\x69\x62\x65\x72\163\122\x65\155\x6f\166\x65", ["\154\151\163\164\111\144" => $listId]), "\x73\x75\142\163\x63\162\x69\x62\145\x72\x73\104\145\x6c\145\164\x65" => url("\151\156\x64\x65\170\x2f\x53\165\x62\x73\143\162\151\142\x65\162\x73\57\x73\x75\142\163\x63\x72\x69\x62\145\162\163\x44\x65\154\x65\164\145"), "\163\x75\x62\163\143\162\x69\x62\x65\162\x73\x57\150\151\x74\145\154\x69\163\x74" => url("\x69\x6e\144\145\x78\57\123\165\x62\x73\143\x72\x69\142\x65\162\x73\x2f\x73\x75\x62\163\x63\162\x69\x62\x65\x72\x73\x57\150\151\164\145\x6c\151\163\164"), "\163\165\x62\163\x63\x72\151\142\145\x72\x73\102\154\x61\x63\x6b\x6c\151\x73\164" => url("\151\156\144\x65\x78\x2f\123\x75\142\x73\143\x72\151\x62\145\x72\163\x2f\x73\165\x62\x73\143\162\151\142\x65\x72\x73\x42\x6c\141\143\153\x6c\x69\x73\164"), "\163\165\142\x73\x63\x72\x69\142\x65\x72\163\x45\x78\160\x6f\x72\x74\x4c\151\163\x74" => url("\x69\x6e\144\x65\170\x2f\x53\x75\142\163\143\x72\151\x62\145\162\163\57\163\x75\142\163\143\x72\151\x62\145\x72\163\x45\170\160\157\162\x74\114\151\163\164", ["\154\x69\163\164\111\x64" => $listId]), "\163\x75\142\163\143\162\x69\142\x65\162\163\x49\155\160\157\x72\x74\114\x69\x73\x74" => url("\x69\156\144\145\170\x2f\123\165\142\163\x63\162\151\142\145\x72\x73\57\163\165\x62\x73\143\x72\x69\x62\145\x72\x73\x49\155\160\157\x72\x74\114\151\x73\164", ["\x6c\x69\163\164\111\x64" => $listId]), "\x73\x75\x62\x73\x63\x72\x69\142\x65\162\x73\101\143\x74\x69\157\x6e" => url("\x69\x6e\x64\x65\170\x2f\x53\x75\142\163\x63\x72\151\x62\145\x72\163\x2f\x73\x75\x62\163\143\162\x69\x62\x65\162\163\x41\143\x74\x69\157\x6e", ["\154\x69\163\x74\111\144" => $listId])); goto tDy0f; asOfL: if ($listInfos) { goto Rrvd7; } goto EAEf7; naXDP: return $this->fetch(); goto N2x_z; nyb8M: $bindValues = ["\154\x69\163\164\x4e\x61\155\x65" => $listInfos["\x6e\x61\x6d\145"], "\154\x69\163\164\111\x64" => $listInfos["\154\151\163\164\x5f\151\144"], "\157\164\150\x65\x72\114\151\163\x74\x73" => $otherLists]; goto W2Xe1; eoR7J: return json($subscribersLogic->load($listId, $search, $page, $rows, $sort, $order)); goto SoUCJ; tDy0f: $this->assign("\x75\x72\x6c\x48\x72\145\x66\163", $urlHrefs); goto CnHmv; SoUCJ: } public function subscribersAdd($listId = 0) { goto Ympjw; paUvI: Log::debug(var_export(Request::instance()->param(), true)); goto UPiqm; PYNdK: $details = input("\x70\157\163\164\56\x64\x65\x74\x61\x69\154\x73\x2f\x61"); goto wjpy2; iHhl5: $this->assign("\x75\x72\154\x48\162\x65\146\x73", $urlHrefs); goto UDRbN; UDRbN: $this->assign("\142\x69\x6e\144\x56\x61\154\x75\145\163", $bindValues); goto dE2yj; gRpCS: $result = $subscribersLogic->addSubscriber($email, $name, $details, $lists); goto EDeUs; nDDg2: $details["\x68\164\155\154\x5f\x65\155\x61\x69\154"] = IndexDefs::eSubscriberHtmlEmail; goto lt1v6; Hh0rv: $lists = []; goto RuQVm; H2SYd: eUeos: goto ytT8y; dE2yj: return $this->fetch(); goto X5WG2; Ggx0B: $checkedLists[] = (int) $listId; goto YKmyx; bgZ6Y: $details = array(); goto nDDg2; lt1v6: $bindValues = ["\x6c\151\163\164\x73" => $lists, "\143\x68\145\143\153\145\x64\x4c\x69\x73\164\x73" => json_encode($checkedLists), "\x64\x65\x74\x61\x69\154\x73" => $details]; goto zVVyA; YKmyx: bnknJ: goto mSzn0; kCxEa: JEj1n: goto byPXe; bJ5fb: if (!empty($listsStr)) { goto l_5mw; } goto Hh0rv; CSTHV: return ajaxSuccess("\346\x93\215\xe4\275\x9c\xe5\244\xb1\350\264\245"); goto KKaai; Ympjw: if (!request()->isGet()) { goto silWl; } goto A8giu; wjpy2: $listsStr = input("\x70\x6f\163\x74\x2e\154\x69\163\164\163\57\163"); goto bJ5fb; A8giu: $listsLogic = new ListsLogic(); goto upvG5; X5WG2: silWl: goto paUvI; RuQVm: goto JEj1n; goto pRlyl; eP3JL: if (!$listId) { goto bnknJ; } goto Ggx0B; mSzn0: $lists = ListsLogic::I()->getAllLists(); goto bgZ6Y; IYzvd: return ajaxSuccess("\xe6\x93\215\xe4\xbd\x9c\xe6\210\x90\xe5\212\x9f"); goto H2SYd; eshr9: Xkqo_: goto IYzvd; upvG5: $checkedLists = array(); goto eP3JL; EDeUs: if ($result) { goto Xkqo_; } goto CSTHV; ff4um: $name = input("\160\157\x73\164\56\156\141\x6d\x65\57\163"); goto PYNdK; zVVyA: $urlHrefs = ["\x63\x68\x65\143\153\x53\x75\x62\163\143\162\151\x62\145\162" => url("\x69\x6e\144\145\x78\57\123\x75\x62\x73\x63\x72\151\x62\145\162\163\57\x63\150\x65\x63\x6b\123\165\142\x73\143\x72\151\x62\145\x72", ["\x6f\x6c\144\x56\x61\x6c\165\x65" => ''])]; goto iHhl5; soe29: $lists = explode("\x2c", $listsStr); goto kCxEa; pRlyl: l_5mw: goto soe29; KKaai: goto eUeos; goto eshr9; byPXe: $subscribersLogic = new SubscribersLogic(); goto gRpCS; UPiqm: $email = input("\x70\157\x73\x74\x2e\x65\155\141\x69\x6c\x2f\163"); goto ff4um; ytT8y: } public function subscribersEdit($subscriberId) { goto Ytdqj; Ytdqj: if (!request()->isGet()) { goto NltpW; } goto Qrh7w; AYDWc: return $this->fetch("\143\x6f\x6d\x6d\x6f\156\57\x65\162\162\157\162"); goto lbLMk; Ubkgr: $checkedLists = $subscribersLogic->getSubscriberLists($subscriberId); goto wxh4z; G0m77: $subscriberInfos = $subscribersLogic->getSubscriber($subscriberId); goto FyTrX; IyDWF: JZltQ: goto MBj0c; IFBoC: $email = input("\x70\x6f\x73\164\x2e\x65\155\x61\151\154\57\163"); goto un42D; wxh4z: $lists = ListsLogic::I()->getAllLists(); goto ZRiuC; QQ0tR: $bindValues = ["\145\x6d\141\151\x6c" => $subscriberInfos["\145\155\x61\x69\154"], "\156\x61\x6d\145" => $subscriberInfos["\156\141\155\x65"], "\154\151\x73\x74\x73" => $lists, "\x63\150\145\x63\153\x65\144\114\x69\x73\x74\x73" => json_encode($checkedLists), "\144\145\x74\x61\151\x6c\163" => $details]; goto NRl0c; iGbbU: W2jKN: goto vGFW1; FqkDM: $details = input("\160\x6f\163\164\56\x64\x65\x74\141\151\154\x73\x2f\141"); goto Z3EV2; HdcNL: $details["\x68\x74\x6d\154\137\145\155\141\151\x6c"] = $subscriberInfos["\150\x74\x6d\154\137\145\x6d\x61\x69\x6c"]; goto QQ0tR; NRl0c: $urlHrefs = ["\x63\x68\x65\x63\153\x53\165\x62\163\143\x72\x69\142\x65\162" => url("\x69\156\144\145\170\57\x53\x75\x62\163\x63\162\151\142\145\x72\163\57\143\x68\145\143\x6b\x53\x75\x62\x73\143\x72\151\142\145\x72", ["\157\154\144\x56\141\154\165\x65" => $subscriberInfos["\x65\x6d\x61\x69\x6c"]])]; goto mBzSQ; lbLMk: qhbod: goto HdcNL; ZRiuC: $details = array(); goto G0m77; uwMRt: return ajaxSuccess("\xe6\x93\x8d\xe4\275\234\xe5\244\xb1\xe8\xb4\245"); goto DZWcA; q71S5: $lists = []; goto CxQ0G; un42D: $name = input("\x70\x6f\163\x74\56\x6e\x61\x6d\x65\57\163"); goto FqkDM; XIRFg: NltpW: goto IFBoC; zCwVq: $subscribersLogic = new SubscribersLogic(); goto Ubkgr; Qrh7w: $listsLogic = new ListsLogic(); goto zCwVq; ODVXX: if (!empty($listsStr)) { goto rhLhc; } goto q71S5; FyTrX: if ($subscriberInfos) { goto qhbod; } goto AYDWc; MBj0c: $subscribersLogic = new SubscribersLogic(); goto XZP1G; CxQ0G: goto JZltQ; goto afLmk; mBzSQ: $this->assign("\165\162\x6c\x48\x72\145\x66\163", $urlHrefs); goto KVNFV; dgbNO: WBWiu: goto zG_bE; Ivc0p: return $this->fetch(); goto XIRFg; iEJzh: if ($result) { goto W2jKN; } goto uwMRt; afLmk: rhLhc: goto Pfshx; XZP1G: $result = $subscribersLogic->editSubscriber($subscriberId, $email, $name, $details, $lists); goto iEJzh; KVNFV: $this->assign("\x62\x69\x6e\144\x56\141\x6c\165\x65\x73", $bindValues); goto Ivc0p; DZWcA: goto WBWiu; goto iGbbU; Z3EV2: $listsStr = input("\x70\157\x73\164\56\x6c\x69\x73\x74\x73\57\x73"); goto ODVXX; Pfshx: $lists = explode("\x2c", $listsStr); goto IyDWF; vGFW1: return ajaxSuccess("\xe6\223\215\344\xbd\x9c\xe6\210\x90\345\x8a\x9f"); goto dgbNO; zG_bE: } public function subscribersRemove($subscriberId, $listId) { goto uAnK0; uAnK0: $subscribersLogic = new SubscribersLogic(); goto aydfW; kgml3: return ajaxSuccess("\xe6\223\x8d\344\xbd\234\xe5\xa4\261\350\xb4\245"); goto lKFJ7; KYIfy: if ($result) { goto kiS15; } goto kgml3; D1oUT: kiS15: goto tghO2; aydfW: $result = $subscribersLogic->removeSubscriber($subscriberId, $listId); goto KYIfy; d3wZd: uVhZI: goto BXjg4; lKFJ7: goto uVhZI; goto D1oUT; tghO2: return ajaxSuccess("\346\223\x8d\xe4\275\x9c\346\x88\220\xe5\212\237"); goto d3wZd; BXjg4: } public function subscribersDelete($subscriberId) { goto yg62Q; JxZ6l: GdhnS: goto jphUs; yg62Q: $subscribersLogic = new SubscribersLogic(); goto T32pE; UvOWE: return ajaxSuccess("\346\223\x8d\xe4\275\234\346\210\220\xe5\212\237"); goto JxZ6l; jK740: goto GdhnS; goto Qtlot; T32pE: $result = $subscribersLogic->deleteSubscriber($subscriberId); goto rbBK8; rbBK8: if ($result) { goto bOWWK; } goto EfxlM; EfxlM: return ajaxSuccess("\xe6\223\x8d\344\275\x9c\xe5\xa4\261\350\xb4\xa5"); goto jK740; Qtlot: bOWWK: goto UvOWE; jphUs: } public function checkSubscriber($oldValue, $email) { goto iX9PO; WGoJT: return "\x74\162\x75\x65"; goto f1mW0; LQyTp: A1jQ4: goto iwynB; R0JYK: if ($exists) { goto A1jQ4; } goto WGoJT; DOaNo: $exists = Db::table("\x73\165\142\163\x63\x72\151\142\x65\162\163")->where("\145\155\141\151\x6c", $email)->count(); goto R0JYK; f2SEI: V3BRh: goto qSIW6; iwynB: return "\146\x61\154\163\x65"; goto f2SEI; iX9PO: if (!($oldValue == $email)) { goto bDM59; } goto eNZ9h; eNZ9h: return "\x74\x72\165\x65"; goto eEnqJ; f1mW0: goto V3BRh; goto LQyTp; eEnqJ: bDM59: goto DOaNo; qSIW6: } public function subscribersWhitelist($subscriberId) { goto d3fA6; VDay6: goto d_gwa; goto UOiOk; d3fA6: $subscribersLogic = new SubscribersLogic(); goto pRR48; pRR48: $result = $subscribersLogic->whitelistSubscriber($subscriberId); goto mBW0r; caY5K: return ajaxSuccess("\346\x93\215\344\xbd\234\346\x88\x90\xe5\212\237"); goto GoI4f; GoI4f: d_gwa: goto KDcfw; UOiOk: HP86v: goto caY5K; mBW0r: if ($result) { goto HP86v; } goto KoK6_; KoK6_: return ajaxSuccess("\346\x93\x8d\xe4\275\x9c\xe5\244\xb1\350\xb4\xa5"); goto VDay6; KDcfw: } public function subscribersBlacklist($subscriberId) { goto AabtE; ov0vF: kLcJL: goto kjHh2; AabtE: $subscribersLogic = new SubscribersLogic(); goto riKc_; M9nW3: return ajaxSuccess("\346\x93\x8d\344\275\x9c\xe5\244\261\350\264\245"); goto vFnTQ; c6VfW: if ($result) { goto kLcJL; } goto M9nW3; vFnTQ: goto t5MaY; goto ov0vF; riKc_: $result = $subscribersLogic->blacklistSubscriber($subscriberId); goto c6VfW; cJL3b: t5MaY: goto gcWnM; kjHh2: return ajaxSuccess("\346\223\x8d\xe4\xbd\234\346\210\x90\345\212\237"); goto cJL3b; gcWnM: } public function subscribersExportList($listId) { goto pb4f2; vv8gO: return $this->fetch("\143\157\155\x6d\x6f\156\57\x65\x72\x72\157\x72"); goto W3FcO; pb4f2: if (!request()->isGet()) { goto bi1tg; } goto prGZd; pFnLj: return $this->fetch(); goto azj7K; BMJlt: $this->assign("\142\151\x6e\144\x56\x61\x6c\165\x65\163", $bindValues); goto pFnLj; prGZd: $urlHrefs = ["\x73\x75\x62\x73\143\162\151\x62\x65\162\163\104\157\167\156\x6c\x6f\x61\144\x43\x53\126" => url("\163\x75\x62\x73\143\x72\x69\x62\x65\x72\x73\104\157\x77\156\154\157\141\x64\x43\123\126", ["\x6c\x69\x73\164\111\x64" => $listId])]; goto fH72C; HdjkT: $listsLogic = new ListsLogic(); goto q3Z1M; DdoXL: $bindValues = ["\x6c\151\163\x74\x49\x64" => $listInfos["\154\x69\x73\164\x5f\151\x64"], "\154\151\x73\x74\x4e\x61\155\x65" => $listInfos["\x6e\x61\x6d\x65"], "\144\x65\146\141\x75\154\164\x44\x61\164\145" => date("\131\55\x6d\55\144"), "\146\x69\145\x6c\x64\163" => IndexDefs::$eSubscriberExportFieldDefs]; goto BMJlt; fH72C: $this->assign("\x75\x72\154\x48\162\145\146\163", $urlHrefs); goto HdjkT; KTTQs: if ($listInfos) { goto Od83Y; } goto vv8gO; azj7K: bi1tg: goto CTIOn; W3FcO: Od83Y: goto DdoXL; q3Z1M: $listInfos = $listsLogic->getList($listId); goto KTTQs; CTIOn: } public function subscribersImportList($listId) { goto YoNX7; C79Xn: w9Fnn: goto BOV9W; DY39H: QTNEO: goto pC9TW; MZO0p: Gouy1: goto aK5fX; SlJU6: if ($listInfos) { goto w9Fnn; } goto Z8a3e; vuNuC: $listsLogic = new ListsLogic(); goto WrQ8R; up_ZG: return $this->fetch(); goto oTX3w; m9rkf: $lists = [$listId]; goto LNpwO; eKsUR: $importResults = ["\154\x69\156\x65\x73\137\160\x72\157\x63\x65\163\x73\145\x64" => 0, "\145\155\141\151\x6c\x5f\141\144\x64\x5f\x74\x6f\x5f\154\151\x73\164" => 0, "\x65\x6d\x61\x69\154\x5f\x6e\145\167" => 0, "\145\155\x61\x69\x6c\137\x65\x78\151\x73\x74" => 0]; goto dtdSJ; LNpwO: $emailListsStr = input("\160\x6f\x73\164\56\145\155\x61\x69\154\114\151\x73\x74\103\x6f\x6e\164\145\156\164\57\x73"); goto v1zXq; YoNX7: if (!request()->isGet()) { goto jQywM; } goto mN5L4; EtEjo: return ajaxSuccess("\163\165\143\143\145\x73\163", '', $this->fetch("\x63\157\x6d\x6d\x6f\156\x2f\141\x6a\x61\x78\x4c\x69\x73\x74")); goto MZO0p; sB96j: return ajaxError("\xe6\x93\x8d\xe4\xbd\x9c\345\xa4\xb1\xe8\264\xa5"); goto TMw0g; pC9TW: $items = ["{$importResults["\154\x69\x6e\x65\163\x5f\x70\x72\157\143\145\x73\163\145\x64"]}\x20\xe9\202\256\xe4\xbb\266\xe5\x9c\260\345\x9d\x80\xe8\xa2\253\xe5\244\x84\347\x90\x86", "{$importResults["\145\155\141\x69\154\137\x61\x64\144\x5f\x74\157\137\154\x69\163\164"]}\40\351\x82\xae\344\xbb\xb6\xe5\234\260\345\x9d\x80\xe6\xb7\273\xe5\212\xa0\345\210\260\347\x9b\xae\346\240\207\xe9\x9b\206\345\x90\x88", "{$importResults["\x65\155\x61\x69\154\137\156\145\167"]}\40\xe6\x96\xb0\xe9\x82\xae\344\273\266\xe5\234\260\xe5\235\x80\xe8\242\xab\xe5\257\xbc\345\205\245", "{$importResults["\x65\155\141\x69\x6c\137\x65\170\x69\163\x74"]}\40\xe9\202\256\xe4\xbb\xb6\xe5\234\xb0\345\x9d\x80\xe5\267\262\xe5\xad\x98\345\x9c\250"]; goto q56Hl; BOV9W: $bindValues = ["\154\151\x73\164\x4e\141\x6d\145" => $listInfos["\156\x61\x6d\145"]]; goto WFbvG; Z8a3e: return $this->fetch("\143\157\x6d\x6d\x6f\x6e\57\145\162\x72\157\x72"); goto C79Xn; WrQ8R: $listInfos = $listsLogic->getList($listId); goto SlJU6; oTX3w: jQywM: goto m9rkf; dtdSJ: $result = $subscribersLogic->importSimple($lists, $emailListsStr, $importResults); goto Ts2l4; q56Hl: $this->assign("\151\164\x65\155\x73", $items); goto EtEjo; Ks545: $this->assign("\x75\x72\154\110\162\x65\146\163", $urlHrefs); goto vuNuC; v1zXq: $subscribersLogic = new SubscribersLogic(); goto eKsUR; mN5L4: $urlHrefs = ["\163\165\142\x73\143\x72\151\x62\x65\162\x73\x49\x6d\160\x6f\x72\164\114\x69\163\164" => url("\x73\165\142\x73\x63\x72\x69\142\x65\162\163\x49\155\160\157\162\164\114\151\163\x74", ["\x6c\x69\x73\164\x49\144" => $listId])]; goto Ks545; TMw0g: goto Gouy1; goto DY39H; Ts2l4: if ($result) { goto QTNEO; } goto sB96j; WFbvG: $this->assign("\x62\151\x6e\x64\126\141\154\165\145\x73", $bindValues); goto up_ZG; aK5fX: } public function subscribersAction($listId) { goto qLEEP; zgCG6: if ($subscribersTarget == IndexDefs::eSubscriberActionTargetTags) { goto PHUhi; } goto e3q_G; kdGEa: NgUhN: goto tCXKb; GRAJV: KRB1r: goto evW4x; b3nyw: foreach ($subscriberIds as $subscriberId) { goto GA2OB; WgJGK: $listSubscriberModel->data(["\x73\x75\142\163\x63\x72\151\142\x65\x72\x5f\151\144" => $subscriberId, "\x6c\151\163\x74\x5f\151\x64" => $subscribersCopyActionList, "\145\156\164\x65\162\145\x64" => date("\131\x2d\155\55\144\40\x48\x3a\151\x3a\163")]); goto TUl7I; TUl7I: $listSubscriberModel->isUpdate(false)->save(); goto yem3g; hXxBq: if ($listSubscriber) { goto XDUqZ; } goto qNKMM; yem3g: XDUqZ: goto WqYkR; GA2OB: $listSubscriber = ListSubscribersModel::get(["\154\x69\x73\x74\x5f\151\x64" => $subscribersCopyActionList, "\x73\x75\x62\163\143\162\x69\x62\145\162\x5f\x69\x64" => $subscriberId]); goto hXxBq; WqYkR: xATap: goto yDhEs; qNKMM: $listSubscriberModel = model("\x4c\151\163\x74\123\x75\x62\163\x63\162\151\142\145\x72\163"); goto WgJGK; yDhEs: } goto N2MmN; fQNaZ: goto LjOac; goto lA5iQ; At8sz: $subscriberIds = Db::table("\163\x75\142\x73\143\162\151\142\145\162\x73")->where("\x73\x75\x62\163\143\x72\x69\x62\x65\x72\x5f\x69\144", "\156\x6f\x74\40\151\x6e", function ($query) { $query->table("\154\151\x73\164\137\163\165\x62\163\x63\x72\x69\x62\145\x72\x73")->distinct(true)->field("\x73\x75\142\163\x63\162\151\142\x65\x72\137\151\144"); })->column("\x73\165\x62\x73\x63\162\151\142\x65\162\137\x69\x64"); goto VHpj2; X6sUE: $subscriberIds = explode("\x2c", $subscriberIdsStr); goto xFSL5; N2MmN: z1BUg: goto xGICm; qjl2a: if ($subscribersAction == IndexDefs::eSubscriberActionDelete) { goto KRB1r; } goto jFyo1; bGvfw: THR8K: goto b3nyw; xFSL5: esqmY: goto lhp0X; eb9rn: SpzfG: goto lDQpC; lhp0X: MrQ2r: goto AnaRJ; IJC07: if ($subscribersAction == IndexDefs::eSubscriberActionCopy) { goto THR8K; } goto QiYST; lA5iQ: hO19d: goto At8sz; jz9Jv: goto MrQ2r; goto EqoXn; uNf6n: F3yIq: goto htRVt; MH0Gy: $subscriberIds = []; goto zgCG6; r7pok: return ajaxSuccess("\346\223\x8d\344\275\234\346\x88\220\xe5\x8a\x9f"); goto lh0A9; qLEEP: $subscribersTarget = input("\160\x6f\x73\164\x2e\163\x75\x62\x73\143\x72\x69\142\145\162\x73\x54\141\162\147\x65\x74\x2f\144"); goto Hayhd; u5rkA: if ($result) { goto NgUhN; } goto yjMgU; yjMgU: return ajaxError("\346\223\215\344\xbd\234\345\244\xb1\350\xb4\xa5"); goto kZVhU; evW4x: foreach ($subscriberIds as $subscriberId) { ListSubscribersModel::where(["\x6c\x69\163\164\137\x69\x64" => $listId, "\163\165\x62\x73\143\162\x69\x62\x65\162\137\151\x64" => $subscriberId])->delete(); sLiHn: } goto eb9rn; npxjf: fJvVK: goto jz9Jv; bomJq: v0fMG: goto GMVzp; SvNql: G1Npw: goto YVm3K; xGICm: $result = true; goto QtbFe; K0NPk: if ($listId == -1) { goto hO19d; } goto Mf6_j; lDQpC: $result = true; goto bGItx; Mf6_j: $subscriberIds = ListSubscribersModel::where("\154\151\x73\x74\137\x69\x64", $listId)->column("\x73\165\142\163\143\x72\151\142\x65\x72\x5f\151\x64"); goto fQNaZ; tCXKb: return ajaxSuccess("\346\x93\215\344\275\x9c\346\x88\x90\xe5\x8a\x9f"); goto bomJq; arLcN: $subscribersMoveActionList = input("\x70\157\163\x74\x2e\163\165\x62\x73\143\162\x69\142\x65\162\x73\115\x6f\166\145\x41\143\164\x69\x6f\156\114\x69\163\164\x2f\144"); goto wA4lK; AnaRJ: if (!empty($subscriberIds)) { goto ILKyw; } goto r7pok; VHpj2: LjOac: goto npxjf; YVm3K: foreach ($subscriberIds as $subscriberId) { goto wJyuh; RFwJT: $listSubscriberModel->isUpdate(false)->save(); goto IQvZo; IQvZo: P8N4R: goto saAsV; qIhep: $listSubscriber = ListSubscribersModel::get(["\x6c\151\163\164\137\x69\x64" => $subscribersMoveActionList, "\163\165\x62\x73\143\x72\151\142\145\162\137\x69\144" => $subscriberId]); goto QGH_M; TlEIi: bymyc: goto qIhep; wJyuh: if (!($listId != -1)) { goto bymyc; } goto A6sRa; A6sRa: ListSubscribersModel::where(["\154\x69\163\x74\137\151\144" => $listId, "\x73\165\142\x73\x63\162\x69\x62\145\162\137\x69\x64" => $subscriberId])->delete(); goto TlEIi; saAsV: Ur_hT: goto RLKmM; QGH_M: if ($listSubscriber) { goto P8N4R; } goto s03cx; q14kR: $listSubscriberModel->data(["\x73\x75\142\163\143\162\x69\x62\145\x72\137\x69\x64" => $subscriberId, "\x6c\x69\x73\x74\x5f\151\144" => $subscribersMoveActionList, "\145\x6e\164\x65\x72\145\x64" => date("\131\55\x6d\55\144\40\110\72\151\x3a\163")]); goto RFwJT; s03cx: $listSubscriberModel = model("\x4c\x69\163\164\123\x75\x62\x73\143\x72\151\x62\x65\x72\163"); goto q14kR; RLKmM: } goto r1Vki; htRVt: goto LIE5I; goto GRAJV; bOi46: if (empty($subscriberIdsStr)) { goto esqmY; } goto X6sUE; Hayhd: $subscribersAction = input("\160\157\x73\x74\56\163\165\x62\x73\143\162\151\x62\145\162\163\101\x63\x74\151\x6f\x6e\57\x64"); goto arLcN; SZdlR: $subscriberIdsStr = input("\x70\x6f\x73\x74\x2e\x73\165\142\x73\x63\162\x69\142\145\x72\111\144\163\57\x73"); goto bOi46; QiYST: $result = true; goto JlxbV; jTKvJ: goto F3yIq; goto SvNql; e3q_G: if (!($subscribersTarget == IndexDefs::eSubscriberActionTargetAll)) { goto fJvVK; } goto K0NPk; cK7O2: $result = true; goto uNf6n; wA4lK: $subscribersCopyActionList = input("\160\x6f\x73\x74\x2e\x73\165\142\163\143\162\151\142\x65\x72\x73\103\x6f\x70\171\x41\x63\x74\151\157\x6e\114\151\x73\x74\57\144"); goto MH0Gy; jFyo1: if ($subscribersAction == IndexDefs::eSubscriberActionMove) { goto G1Npw; } goto IJC07; lh0A9: ILKyw: goto qjl2a; JlxbV: goto E3d3D; goto bGvfw; r1Vki: LY6a0: goto cK7O2; bGItx: LIE5I: goto u5rkA; kZVhU: goto v0fMG; goto kdGEa; QtbFe: E3d3D: goto jTKvJ; EqoXn: PHUhi: goto SZdlR; GMVzp: } public function subscribersSearch($search = array(), $page = 1, $rows = 20, $sort = '', $order = '') { goto HDXAA; evvV2: $urlHrefs = array("\x73\x75\142\x73\x63\x72\151\142\145\x72\163\123\x65\x61\x72\143\150" => url("\x69\x6e\x64\145\170\57\x53\x75\142\x73\x63\x72\x69\142\145\x72\163\57\x73\x75\x62\x73\x63\162\151\142\145\162\x73\123\x65\x61\162\143\x68"), "\x73\x75\142\x73\x63\162\x69\x62\145\x72\163\x53\x65\141\162\x63\x68\101\x64\144" => url("\x69\156\144\x65\x78\57\x53\x75\x62\163\x63\162\151\142\x65\162\x73\x2f\163\x75\142\x73\x63\x72\x69\x62\x65\162\x73\x41\x64\144"), "\163\x75\x62\x73\x63\x72\x69\142\145\162\x73\x53\145\141\x72\x63\x68\x45\144\151\164" => url("\151\156\144\x65\170\57\x53\x75\142\x73\x63\162\x69\x62\145\162\163\x2f\x73\165\142\x73\143\162\x69\142\145\162\163\x45\144\x69\x74"), "\x73\165\x62\163\143\162\151\x62\145\162\163\x53\145\141\x72\x63\x68\x44\x65\x6c\145\164\145" => url("\x69\x6e\144\x65\170\57\x53\165\x62\163\x63\162\151\142\145\x72\x73\57\163\x75\142\x73\143\162\x69\x62\x65\162\163\x44\x65\154\x65\x74\145"), "\163\x75\142\x73\143\x72\151\x62\x65\162\163\127\150\x69\x74\x65\154\x69\163\164" => url("\151\x6e\x64\145\170\x2f\x53\x75\x62\163\x63\162\151\142\145\162\163\x2f\x73\165\142\163\143\162\x69\x62\145\x72\163\x57\150\151\x74\x65\154\151\x73\164"), "\163\165\142\163\143\x72\151\x62\145\162\x73\x42\154\141\x63\153\x6c\x69\x73\x74" => url("\x69\156\144\145\170\57\x53\165\x62\x73\143\x72\151\x62\x65\x72\163\57\x73\165\142\163\x63\162\151\142\145\x72\x73\x42\x6c\141\143\153\x6c\151\163\164"), "\x73\165\x62\x73\143\162\x69\142\x65\162\163\x41\x6c\154\x45\170\160\157\162\x74" => url("\x69\x6e\x64\x65\x78\x2f\123\x75\142\163\143\x72\x69\x62\145\162\163\57\163\165\x62\163\143\x72\x69\142\145\162\163\101\154\154\x45\x78\160\x6f\x72\x74"), "\x73\x75\142\163\x63\x72\151\142\x65\x72\x73\x41\x6c\154\111\155\x70\x6f\162\164" => url("\x69\x6e\x64\145\x78\x2f\123\165\x62\x73\143\162\x69\x62\x65\x72\163\x2f\x73\x75\142\x73\x63\x72\x69\142\x65\162\x73\x41\x6c\154\x49\155\x70\157\162\x74"), "\163\x75\x62\x73\x63\x72\151\x62\145\x72\163\x44\x65\x6c\x65\x74\145\x43\x68\145\143\153\145\144" => url("\151\x6e\x64\x65\x78\x2f\x53\165\142\x73\x63\x72\x69\142\145\162\163\57\163\x75\142\x73\x63\x72\151\x62\145\162\163\x44\x65\154\x65\x74\145\x43\150\x65\x63\x6b\145\144")); goto x6GxC; j_lUr: $lists = ListsLogic::I()->getAllLists(); goto YlpUQ; YlpUQ: $this->assign("\x6c\151\x73\x74\x73", $lists); goto BMSfM; hrpNK: $subscribersLogic = new SubscribersLogic(); goto R2fb0; x6GxC: $this->assign("\165\162\154\110\x72\x65\146\x73", $urlHrefs); goto j_lUr; BMSfM: return $this->fetch(); goto Ch4UW; R2fb0: return json($subscribersLogic->loadSearch($search, $page, $rows, $sort, $order)); goto aKe1W; HDXAA: if (!request()->isGet()) { goto nxHNT; } goto evvV2; Ch4UW: nxHNT: goto hrpNK; aKe1W: } public function subscribersAllExport() { goto eTHds; JU1Rd: $bindValues = ["\x64\145\x66\141\165\154\164\104\141\164\145" => date("\x59\55\155\x2d\x64"), "\x6c\151\163\x74\163" => ListsLogic::I()->getAllLists(), "\146\151\x65\x6c\144\163" => IndexDefs::$eSubscriberExportFieldDefs]; goto ipUXC; eTHds: if (!request()->isGet()) { goto e6oFx; } goto W2dCr; T2OkN: $this->assign("\x75\x72\154\110\162\145\146\163", $urlHrefs); goto aLA8I; aLA8I: $listsLogic = new ListsLogic(); goto JU1Rd; W2dCr: $urlHrefs = ["\x73\x75\x62\x73\x63\x72\x69\142\145\x72\x73\104\x6f\x77\x6e\x6c\157\141\x64\103\123\x56" => url("\163\x75\142\x73\x63\x72\x69\142\x65\x72\x73\104\157\167\x6e\x6c\157\x61\144\x43\x53\126")]; goto T2OkN; UNJQ_: e6oFx: goto ReZ7O; ipUXC: $this->assign("\x62\x69\x6e\x64\126\141\x6c\165\x65\x73", $bindValues); goto L669y; L669y: return $this->fetch(); goto UNJQ_; ReZ7O: } public function subscribersDownloadCSV($listId = null) { goto aib99; l_z_G: return $this->fetch("\x63\x6f\x6d\155\x6f\x6e\57\x69\x6e\166\141\154\x69\144\x52\145\161\x75\x65\x73\x74"); goto c5Xu4; aib99: $dateType = input("\147\145\164\x2e\x64\x61\164\145\x54\x79\x70\x65\x2f\x64"); goto yccw0; oJsR4: $dateTo = null; goto DaQUR; GmPmk: return $this->fetch("\x63\x6f\155\x6d\x6f\x6e\x2f\x69\x6e\166\141\154\151\144\122\145\x71\x75\145\x73\x74"); goto RCmRd; l_ZF6: if ($requestOk) { goto P2XnD; } goto GmPmk; zwi3s: $dateFrom = null; goto oJsR4; c5Xu4: goto XFw2g; goto ulmXR; I0b7Q: $fields = explode("\54", $fieldsStr); goto P1K8p; kjCmC: exit(0); goto WFbrS; ishkr: if (IndexDefs::eSubscriberExportDateAny == $dateType) { goto vqDj3; } goto lCf0T; ulmXR: lGUVH: goto MtN5c; VN2cT: if (empty($dateTo)) { goto tqA_Y; } goto koBbi; koBbi: $dateTo = date("\131\x2d\x6d\55\x64", strtotime($dateTo . "\40\x2b\x31\x20\144\141\171")); goto YFQuM; DaQUR: ILxIG: goto l_ZF6; RCmRd: P2XnD: goto VN2cT; OGxEs: XFw2g: goto OLZCf; yccw0: $fieldsStr = input("\147\x65\x74\x2e\x66\x69\x65\x6c\x64\163\57\x73"); goto SjnTn; S9hOY: return $this->fetch("\x63\157\155\155\157\156\57\x69\x6e\x76\141\154\x69\x64\x52\145\161\165\145\x73\x74"); goto e7HDz; MtN5c: $dateFrom = input("\147\x65\164\x2e\x64\x61\164\145\x46\162\x6f\155\57\163"); goto Cmv_v; Y9aAM: if (!(empty($dateFrom) || empty($dateTo))) { goto HR_IW; } goto ozVP0; Cmv_v: $dateTo = input("\x67\x65\x74\56\144\141\x74\x65\124\x6f\x2f\163"); goto Y9aAM; lCf0T: if (IndexDefs::eSubscriberExportDateChanged == $dateType) { goto lGUVH; } goto l_z_G; PlVE2: $subscribersLogic->downloadSubscriber($dateType, $fields, $dateFrom, $dateTo, $listId); goto kjCmC; OLZCf: goto ILxIG; goto FKQtW; P1K8p: $requestOk = true; goto ishkr; SjnTn: if (!empty($fieldsStr)) { goto xcPKk; } goto S9hOY; ZBY2V: HR_IW: goto OGxEs; gEqGR: $subscribersLogic = new SubscribersLogic(); goto PlVE2; FKQtW: vqDj3: goto zwi3s; YFQuM: tqA_Y: goto gEqGR; e7HDz: xcPKk: goto I0b7Q; ozVP0: $requestOk = false; goto ZBY2V; WFbrS: } public function subscribersAllImport() { goto p_bT7; CmnFb: $this->assign("\x75\x72\x6c\x48\162\145\x66\163", $urlHrefs); goto cWFZP; cWFZP: $bindValues = ["\x6c\151\x73\164\x73" => ListsLogic::I()->getAllLists()]; goto a4WqK; fCtER: $urlHrefs = ["\x69\x6d\160\157\x72\x74\123\x69\155\160\154\145" => url("\x73\165\142\x73\x63\x72\151\142\x65\162\163\x49\155\x70\x6f\162\164\123\151\x6d\160\x6c\145"), "\x69\x6d\160\x6f\162\x74\106\151\154\x65" => url("\163\x75\142\x73\143\x72\x69\x62\x65\162\163\111\x6d\160\157\x72\164\106\151\x6c\145"), "\x69\155\x70\157\162\x74\103\x73\x76\x66\151\154\x65" => url("\x73\x75\142\163\x63\162\x69\x62\x65\x72\163\x49\155\x70\x6f\x72\164\103\163\x76\x66\151\x6c\145")]; goto CmnFb; a4WqK: $this->assign("\x62\x69\x6e\144\126\141\154\165\x65\163", $bindValues); goto Oj1eQ; mTDSO: ltb6m: goto IG2YH; Oj1eQ: return $this->fetch(); goto mTDSO; p_bT7: if (!request()->isGet()) { goto ltb6m; } goto fCtER; IG2YH: } public function subscribersImportSimple() { goto pOzKZ; WS0zT: $lists = explode("\54", $listsStr); goto ksIWA; qAB9O: return ajaxError("\346\227\xa0\xe6\x95\210\xe8\257\xb7\346\xb1\202"); goto ov2GN; ksIWA: $emailListsStr = input("\x70\157\x73\x74\56\x65\x6d\141\x69\x6c\114\x69\x73\x74\103\157\x6e\164\145\156\x74\x2f\163"); goto t5PZ9; P4vPN: $urlHrefs = ["\x73\165\142\x73\143\162\151\142\x65\x72\x73\x49\155\160\157\x72\x74\123\x69\155\x70\x6c\x65" => url("\163\x75\142\x73\143\x72\x69\142\x65\162\x73\111\x6d\160\157\x72\164\x53\x69\x6d\x70\x6c\145")]; goto ZpzY4; t18Y4: return ajaxSuccess("\x73\165\x63\143\145\163\x73", '', $this->fetch("\143\x6f\155\x6d\x6f\x6e\x2f\141\152\x61\170\114\151\x73\x74")); goto k4dQ5; mujww: if (!($listsStr === null)) { goto JC9N1; } goto qAB9O; DS3KM: UKd9z: goto jeZZV; yBfHm: $this->assign("\x69\x74\145\x6d\x73", $items); goto t18Y4; ClG2q: if ($result) { goto UKd9z; } goto AjPvl; uLSaB: $listsStr = input("\147\145\x74\56\154\x69\163\164\x73\57\x73"); goto mujww; pOzKZ: if (!request()->isGet()) { goto m1r15; } goto P4vPN; KPKu3: $importResults = ["\154\151\x6e\x65\163\x5f\x70\x72\x6f\x63\x65\163\163\145\144" => 0, "\x65\155\141\x69\x6c\137\141\144\144\137\x74\x6f\137\x6c\x69\x73\164" => 0, "\145\x6d\141\x69\154\x5f\x6e\145\x77" => 0, "\145\x6d\x61\x69\x6c\x5f\145\170\x69\x73\x74" => 0]; goto OUoBO; uuCW_: goto PsOnQ; goto DS3KM; t5PZ9: $subscribersLogic = new SubscribersLogic(); goto KPKu3; k4dQ5: PsOnQ: goto AV_yb; OUoBO: $result = $subscribersLogic->importSimple($lists, $emailListsStr, $importResults); goto ClG2q; ov2GN: JC9N1: goto WS0zT; wPWWm: m1r15: goto uLSaB; f7244: return $this->fetch(); goto wPWWm; ZpzY4: $this->assign("\165\162\x6c\110\x72\145\146\x73", $urlHrefs); goto f7244; jeZZV: $items = ["{$importResults["\x6c\x69\156\x65\163\x5f\x70\162\x6f\143\145\163\163\x65\144"]}\x20\xe9\202\xae\344\273\xb6\xe5\x9c\xb0\345\x9d\x80\xe8\242\xab\345\xa4\x84\347\220\206", "{$importResults["\145\155\141\151\154\x5f\x61\x64\x64\137\164\x6f\137\154\x69\163\164"]}\40\xe9\x82\xae\xe4\273\xb6\xe5\234\xb0\xe5\235\x80\346\xb7\273\345\212\xa0\xe5\210\260\347\233\256\xe6\xa0\x87\xe9\233\206\345\x90\x88", "{$importResults["\x65\155\141\151\x6c\137\x6e\145\167"]}\40\xe6\x96\260\351\202\xae\xe4\273\xb6\xe5\234\xb0\xe5\x9d\200\xe8\242\xab\xe5\257\xbc\xe5\x85\245", "{$importResults["\145\155\x61\x69\154\x5f\145\x78\x69\163\164"]}\40\xe9\x82\xae\xe4\273\xb6\xe5\234\260\xe5\235\x80\xe5\267\262\xe5\xad\x98\xe5\x9c\250"]; goto yBfHm; AjPvl: return ajaxError("\346\x93\x8d\xe4\275\234\345\244\xb1\350\264\xa5"); goto uuCW_; AV_yb: } public function subscribersImportFile() { goto ZUYXs; LAXVw: XIRxj: goto DDb9x; E1fz4: if ($isTestOutput) { goto YtBp7; } goto Tc_Ci; t4622: goto ZuZqu; goto za_FF; CqLrU: return ajaxError("\xe8\xbd\254\347\xa7\273\344\xb8\212\344\xbc\xa0\346\226\207\xe4\273\266\345\xa4\xb1\xe8\264\xa5\x2c\40\143\141\x75\163\x65\x3a\40" . $fileInfo->getError()); goto G5UK2; UTi3z: $result = $subscribersLogic->importFile($lists, $filePath, $importResults); goto uVHDx; dxJuE: if (!input("\x3f\x67\145\x74\x2e\x74\x65\x73\x74")) { goto osXl3; } goto yrLyD; rIiqM: ZuZqu: goto lTVuN; qu0vD: $errorDesc = "\x45\170\x63\145\x65\x64\145\144\40\x66\151\x6c\145\163\151\172\145\40\x6c\x69\x6d\151\164\x20" . config("\x75\x70\x6c\157\141\144\x2e\163\x69\x7a\x65") . "\56"; goto rIiqM; Uj429: $originalSize = $uploadInfo["\x73\151\x7a\x65"]; goto cnruj; pg1rq: goto XSdcH; goto y82kP; be_AY: $errorDesc = "\125\156\153\x6e\157\x77\156\40\x65\x72\162\x6f\x72\x73\56"; goto t4622; iCho3: wL__C: goto KNErv; mtmIq: $lists = explode("\x2c", $listsStr); goto Pa0V3; vpRi4: if ($originalError == UPLOAD_ERR_NO_FILE) { goto RNm9T; } goto LR0sn; lTVuN: goto yDx2F; goto iHjtW; I_9ij: $listsStr = input("\147\145\164\56\x6c\x69\x73\x74\163\57\x73"); goto mtmIq; QntkT: if (!($file == null)) { goto XIRxj; } goto Nk92C; zLBel: return ajaxError("\xe4\270\212\344\xbc\xa0\xe6\226\x87\344\273\xb6\345\xa4\261\350\264\245\54\40\xe5\x8e\x9f\xe5\x9b\xa0\72\x20" . $errorDesc); goto T3S7K; N40Sj: $this->assign("\x69\x74\x65\155\x73", $emails); goto ujK27; G5UK2: GHNhl: goto taDCt; iHjtW: RNm9T: goto W2z9o; BknWf: XSdcH: goto dwDLV; y82kP: iLynH: goto N40Sj; IEieC: $fileInfo = $file->move(IMPORT_DIR); goto Qa3SG; Uh78M: yDx2F: goto zLBel; taDCt: $filePath = IMPORT_DIR . DS . $fileInfo->getSaveName(); goto JVPUq; KNErv: $items = ["{$importResults["\154\x69\156\145\x73\137\160\162\157\x63\x65\x73\x73\145\144"]}\40\351\202\256\xe4\273\xb6\xe5\x9c\260\xe5\x9d\x80\350\242\253\xe5\xa4\204\347\x90\x86", "{$importResults["\x65\x6d\141\151\154\137\141\x64\x64\x5f\x74\157\x5f\x6c\x69\163\x74"]}\x20\351\x82\256\xe4\xbb\xb6\345\x9c\260\345\x9d\x80\xe6\267\xbb\345\212\240\345\x88\260\xe7\x9b\256\xe6\240\x87\xe9\x9b\x86\xe5\x90\x88", "{$importResults["\x65\155\x61\x69\x6c\x5f\x6e\145\167"]}\x20\346\x96\260\351\202\256\344\273\266\345\x9c\260\345\x9d\x80\350\xa2\xab\345\257\274\345\x85\245", "{$importResults["\x65\x6d\x61\x69\154\x5f\145\170\x69\163\164"]}\40\xe9\x82\256\344\273\266\345\x9c\260\xe5\235\200\345\267\262\345\255\230\xe5\x9c\250"]; goto dB7dO; T1KyO: MfN6E: goto GeJ5z; Qa3SG: if (!($fileInfo == null)) { goto GHNhl; } goto CqLrU; uVHDx: if ($result) { goto wL__C; } goto xPo0Y; w2svp: return ajaxError("\346\223\215\344\xbd\x9c\xe5\244\261\350\xb4\245"); goto pg1rq; qUv1M: $originalName = $uploadInfo["\156\141\x6d\x65"]; goto kZfAo; zulAt: $urlHrefs = ["\x73\165\x62\x73\143\x72\151\x62\x65\x72\163\111\x6d\x70\157\x72\164\106\x69\x6c\x65" => url("\163\x75\x62\163\143\162\x69\x62\145\162\x73\x49\155\x70\x6f\x72\164\x46\x69\154\145")]; goto l6pvu; xPo0Y: return ajaxError("\xe6\x93\x8d\xe4\xbd\234\xe5\xa4\xb1\xe8\264\245"); goto vn7jD; za_FF: vHsyQ: goto qu0vD; rqxXK: osXl3: goto EklwX; a1Hjb: $result = $subscribersLogic->importFileTest($filePath, $emails); goto nWtRy; EklwX: $file = request()->file("\x75\x70\154\x6f\x61\x64\105\155\x61\151\x6c\x46\151\154\x65"); goto QntkT; dB7dO: $this->assign("\x69\164\145\155\x73", $items); goto UFWDo; GeJ5z: goto sxFbp; goto GzyCS; yrLyD: $isTestOutput = 1; goto rqxXK; nWtRy: if ($result) { goto iLynH; } goto w2svp; WPyzW: $errorDesc = ''; goto vpRi4; W2z9o: $errorDesc = "\x4e\x6f\x20\x66\151\154\145\40\163\x65\156\x74\56"; goto Uh78M; T3S7K: pVl6R: goto IEieC; UFWDo: return ajaxSuccess("\163\x75\x63\x63\x65\163\x73", '', $this->fetch("\x63\x6f\x6d\155\157\x6e\57\141\152\x61\170\114\x69\x73\x74")); goto T1KyO; LR0sn: if ($originalError == UPLOAD_ERR_INI_SIZE || $originalError == UPLOAD_ERR_FORM_SIZE) { goto vHsyQ; } goto be_AY; d6U38: return $this->fetch(); goto MVBat; Pa0V3: $isTestOutput = 0; goto dxJuE; ujK27: return ajaxSuccess("\163\x75\x63\143\145\163\x73", '', $this->fetch("\x63\157\155\155\157\x6e\x2f\141\x6a\141\170\x4c\x69\x73\164")); goto BknWf; dwDLV: sxFbp: goto R6yvv; GzyCS: YtBp7: goto WCsEF; l6pvu: $this->assign("\165\162\x6c\x48\162\x65\x66\x73", $urlHrefs); goto d6U38; cnruj: $originalTmpName = $uploadInfo["\x74\x6d\160\x5f\156\x61\155\x65"]; goto liVXZ; sBLiC: if (!($originalError != UPLOAD_ERR_OK)) { goto pVl6R; } goto WPyzW; WCsEF: $emails = []; goto a1Hjb; kZfAo: $originalType = $uploadInfo["\x74\171\x70\145"]; goto Uj429; ZUYXs: if (!request()->isGet()) { goto HVqyV; } goto zulAt; DDb9x: $uploadInfo = $file->getInfo(); goto qUv1M; Nk92C: return ajaxError("\344\270\212\344\xbc\240\xe6\x96\x87\xe4\xbb\266\345\xa4\xb1\350\264\245"); goto LAXVw; MVBat: HVqyV: goto I_9ij; JVPUq: $subscribersLogic = new SubscribersLogic(); goto E1fz4; Tc_Ci: $importResults = ["\154\x69\156\x65\163\x5f\160\x72\x6f\x63\145\x73\163\x65\144" => 0, "\x65\x6d\x61\151\154\x5f\141\144\144\x5f\x74\x6f\x5f\154\x69\x73\x74" => 0, "\x65\x6d\141\x69\x6c\x5f\x6e\x65\x77" => 0, "\x65\155\x61\x69\x6c\137\145\170\x69\163\164" => 0]; goto UTi3z; vn7jD: goto MfN6E; goto iCho3; liVXZ: $originalError = $uploadInfo["\145\x72\x72\157\162"]; goto sBLiC; R6yvv: } public function subscribersImportCsvfile() { goto oKV1q; ExN01: v4BQY: goto Tn6xF; HB1FP: aLAwy: goto dZu56; dZu56: goto Qq8gK; goto Yipf3; LCp8E: $lists = explode("\x2c", $listsStr); goto L1mxJ; JhoY5: return ajaxError("\350\xbd\xac\xe7\247\273\xe4\270\x8a\344\274\240\xe6\226\207\xe4\273\266\xe5\xa4\261\xe8\264\245\x20\x2d\40" . $fileInfo->getError()); goto pCgDC; Yipf3: YWTFq: goto MxNPk; bO_LB: $result = $subscribersLogic->importCsvFile($lists, $filePath, $isOverwrite, $importResults); goto jhQCt; BCU0i: $isOverwrite = 0; goto Tj3fS; MxNPk: $emails = []; goto MLyze; IKci6: if ($isTestOutput) { goto YWTFq; } goto rZdPi; oLacX: $isTestOutput = 1; goto CE9yi; pCgDC: mh0Sz: goto nXLCQ; LXh2G: if ($result) { goto bxBKg; } goto r66rS; dEoke: if (!($fileInfo == null)) { goto mh0Sz; } goto JhoY5; dNOoC: return ajaxError("\xe4\xb8\212\344\274\xa0\346\x96\x87\xe4\273\xb6\345\244\xb1\xe8\264\xa5"); goto tB8BZ; EKeCc: $file = request()->file("\165\x70\154\157\141\x64\105\155\141\x69\x6c\x43\x73\166\x46\x69\x6c\145"); goto tCXas; YFvjz: ZWeqx: goto x4pqQ; ZFXUU: $subscribersLogic = new SubscribersLogic(); goto IKci6; MLyze: $result = $subscribersLogic->importCsvFileTest($filePath, $emails); goto LXh2G; jhQCt: if ($result) { goto v4BQY; } goto NTFGF; iHien: if (!input("\x3f\147\x65\164\x2e\x74\145\x73\x74")) { goto cRKVG; } goto oLacX; Wi4FI: $isOverwrite = input("\x70\x6f\163\x74\x2e\x75\x70\x6c\x6f\x61\x64\105\155\141\151\154\103\163\x76\x46\151\154\145\117\x76\x65\162\x77\x72\x69\x74\145\x2f\144"); goto aWeF2; JwBQh: return $this->fetch(); goto YFvjz; zzFBy: return ajaxSuccess("\x73\x75\143\143\145\x73\163", '', $this->fetch("\x63\x6f\155\x6d\157\156\57\141\x6a\141\170\114\x69\x73\164")); goto G_4r8; cCoOB: $this->assign("\x69\x74\x65\x6d\x73", $emails); goto zzFBy; zKTSc: $this->assign("\x75\162\154\x48\162\x65\x66\163", $urlHrefs); goto JwBQh; G_4r8: zDPa7: goto kZupd; Tn6xF: $items = ["{$importResults["\x6c\151\x6e\145\x73\x5f\160\x72\157\143\x65\163\163\145\144"]}\40\351\202\xae\344\xbb\xb6\345\234\260\345\x9d\x80\350\242\253\345\244\204\347\220\206", "{$importResults["\x65\x6d\141\151\x6c\137\141\144\x64\x5f\164\x6f\137\154\151\163\x74"]}\x20\xe9\x82\xae\344\273\266\345\x9c\260\xe5\235\200\xe6\xb7\xbb\xe5\x8a\xa0\345\210\260\xe7\233\256\xe6\240\207\xe9\233\206\345\220\x88", "{$importResults["\145\155\x61\151\x6c\137\156\145\x77"]}\x20\xe6\x96\xb0\xe9\x82\256\344\xbb\266\345\x9c\260\xe5\x9d\x80\350\242\253\xe5\257\xbc\345\205\245", "{$importResults["\x65\155\x61\151\154\137\145\170\x69\163\x74"]}\x20\351\x82\256\344\273\xb6\xe5\x9c\260\345\x9d\200\345\267\xb2\xe5\xad\230\xe5\234\250"]; goto SBbGX; Db3HD: return ajaxSuccess("\163\165\x63\x63\x65\x73\x73", '', $this->fetch("\x63\157\155\155\157\x6e\x2f\x61\x6a\141\x78\114\151\x73\164")); goto HB1FP; tB8BZ: DFQRJ: goto jilmu; KJOon: bxBKg: goto cCoOB; tCXas: if (!($file == null)) { goto DFQRJ; } goto dNOoC; rZdPi: $importResults = ["\x6c\151\156\x65\x73\x5f\160\162\x6f\x63\145\x73\x73\x65\144" => 0, "\x65\155\x61\151\154\x5f\141\144\144\x5f\164\157\x5f\154\x69\163\x74" => 0, "\145\155\141\151\154\137\156\x65\167" => 0, "\x65\x6d\x61\151\x6c\137\145\x78\151\163\164" => 0]; goto bO_LB; oKV1q: if (!request()->isGet()) { goto ZWeqx; } goto BsIs4; SBbGX: $this->assign("\151\x74\145\x6d\163", $items); goto Db3HD; aWeF2: spVD2: goto EKeCc; eA0fw: goto aLAwy; goto ExN01; Tj3fS: if (!input("\77\x70\157\x73\x74\56\x75\160\154\157\141\144\x45\155\x61\x69\154\x43\163\166\x46\151\154\145\x4f\x76\x65\x72\x77\162\151\164\x65")) { goto spVD2; } goto Wi4FI; r66rS: return ajaxError("\346\x93\x8d\xe4\275\x9c\345\xa4\xb1\350\264\245"); goto npBQ8; nXLCQ: $filePath = IMPORT_DIR . DS . $fileInfo->getSaveName(); goto ZFXUU; CE9yi: cRKVG: goto BCU0i; L1mxJ: $isTestOutput = 0; goto iHien; npBQ8: goto zDPa7; goto KJOon; kZupd: Qq8gK: goto Wdx2t; BsIs4: $urlHrefs = ["\x73\x75\142\163\143\162\x69\142\x65\x72\163\x49\155\160\157\x72\164\103\163\166\x66\x69\154\145" => url("\x73\x75\142\163\143\162\x69\x62\x65\x72\x73\111\155\160\x6f\x72\x74\x43\163\x76\x66\x69\154\x65")]; goto zKTSc; NTFGF: return ajaxError("\346\x93\215\344\275\x9c\xe5\244\261\xe8\264\245"); goto eA0fw; x4pqQ: $listsStr = input("\147\145\x74\x2e\154\x69\163\164\x73\57\163"); goto LCp8E; jilmu: $fileInfo = $file->move(IMPORT_DIR); goto dEoke; Wdx2t: } public function subscribersDeleteChecked() { goto xbde9; xbde9: $subscriberIds = input("\x73\x75\x62\163\143\162\151\x62\145\162\111\x64\163\57\x61", []); goto cAH7n; ZvpIV: foreach ($subscriberIds as $subscriberId) { $subscribersLogic->deleteSubscriber($subscriberId); TWILI: } goto YWDQT; YWDQT: DFiwP: goto LZEAf; LZEAf: return ajaxSuccess("\346\223\x8d\344\xbd\x9c\xe6\210\220\345\x8a\237"); goto CcjrI; cAH7n: $subscribersLogic = new SubscribersLogic(); goto ZvpIV; CcjrI: } public function subscribersSaveLists() { goto TCfuO; Ly4RE: $listIds = input("\x6c\151\163\x74\x49\x64\163\57\x61", []); goto R3uxu; f6Val: AUIeY: goto JU17z; R3uxu: $subscribersLogic = new SubscribersLogic(); goto yAJ9q; JU17z: return ajaxSuccess("\xe6\223\215\xe4\xbd\x9c\346\210\220\345\x8a\237"); goto xbD_9; yAJ9q: foreach ($subscriberIds as $subscriberId) { goto Rp8A9; CH6Vt: WGJ28: goto DK0rk; DK0rk: sEBHB: goto BkDJz; Rp8A9: foreach ($listIds as $listId) { $subscribersLogic->saveSubscriberList($subscriberId, $listId); dS9Sl: } goto CH6Vt; BkDJz: } goto f6Val; TCfuO: $subscriberIds = input("\x73\x75\x62\163\143\x72\x69\142\x65\x72\x49\x64\163\x2f\x61", []); goto Ly4RE; xbD_9: } }
