<?php
 namespace app\index\controller; use think\Controller; use think\Log; use app\index\logic\Templates as TemplatesLogic; class Templates extends Common { public function templates($search = array(), $page = 1, $rows = 20, $sort = "\x74\145\155\160\154\141\164\145\x5f\x69\x64", $order = "\144\145\x73\143") { goto yfcoK; IYGFh: eh91M: goto ZtQqW; ZtQqW: return json($templatesLogic->load($search, $page, $rows, $sort, $order)); goto Tbyip; RgxP0: if (!request()->isGet()) { goto eh91M; } goto EOliq; rYliz: $this->assign("\165\x72\154\x48\x72\145\146\x73", $urlHrefs); goto JjSrs; JjSrs: return $this->fetch(); goto IYGFh; EOliq: $urlHrefs = ["\x74\x65\155\x70\154\x61\x74\x65\163" => url("\x74\145\x6d\160\x6c\141\164\145\x73"), "\x74\x65\x6d\160\154\x61\164\145\x73\x41\144\x64" => url("\164\145\x6d\160\x6c\x61\164\145\x73\x41\144\x64"), "\164\x65\155\x70\x6c\141\164\145\163\105\144\x69\x74" => url("\164\145\155\x70\154\x61\164\145\163\x45\x64\x69\x74"), "\164\x65\155\160\154\x61\164\x65\163\x44\x65\x6c\x65\x74\x65" => url("\x74\145\x6d\x70\154\x61\x74\145\x73\x44\x65\154\145\164\x65"), "\x74\145\x6d\x70\154\x61\164\145\x73\x50\x72\145\x76\151\145\167" => url("\164\145\x6d\160\154\x61\x74\x65\x73\120\162\145\x76\151\145\x77"), "\x74\145\155\160\154\141\x74\x65\163\115\x61\x6b\x65\104\x65\x66\x61\165\154\164" => url("\164\x65\155\160\x6c\141\x74\x65\163\115\141\153\x65\104\145\x66\x61\165\x6c\164"), "\164\x65\x6d\x70\x6c\x61\x74\x65\163\115\x61\x6b\145\123\171\163\164\145\155" => url("\164\145\x6d\x70\154\141\164\145\163\x4d\141\x6b\145\x53\171\163\164\x65\x6d")]; goto rYliz; yfcoK: $templatesLogic = TemplatesLogic::I(); goto RgxP0; Tbyip: } public function templatesAdd() { goto UuJy1; UuJy1: if (!request()->isGet()) { goto e89qo; } goto FRctv; tkFbE: $this->assign("\x62\x69\156\x64\126\x61\x6c\x75\x65\163", $bindValues); goto GgDTi; dbWZW: $templatesLogic = TemplatesLogic::I(); goto Yq_p8; FRctv: $urlHrefs = ["\165\160\154\157\141\x64\x49\x6d\141\x67\x65" => url("\125\x70\154\x6f\141\144\x2f\165\160\154\157\x61\x64\x49\155\x61\147\x65\106\x72\x6f\155\103\113\x45\144\x69\x74\157\162")]; goto nnWRW; Yq_p8: $title = input("\160\x6f\163\x74\x2e\164\151\164\x6c\145"); goto yXtPe; tuZU0: $bindValues = ["\x74\x69\x74\154\x65" => "\x4d\x79\40\164\145\155\160\154\141\164\145", "\x74\145\155\x70\154\141\164\145" => \app\index\model\Templates::$defaultTemplate]; goto tkFbE; nnWRW: $this->assign("\165\162\x6c\x48\x72\x65\x66\x73", $urlHrefs); goto tuZU0; XaFqf: e89qo: goto dbWZW; yXtPe: $template = input("\160\x6f\x73\x74\x2e\x74\145\x6d\x70\x6c\x61\x74\x65"); goto BtdaV; rjyCn: return ajaxSuccess("\346\223\215\xe4\275\234\346\x88\x90\xe5\212\237"); goto AMJs6; BtdaV: $templatesLogic->addTemplate($title, $template); goto rjyCn; GgDTi: return $this->fetch(); goto XaFqf; AMJs6: } public function templatesEdit($templateId) { goto sigVz; dwe6d: n3HNr: goto uXmUY; sigVz: $templatesLogic = TemplatesLogic::I(); goto o8aOi; EyNSl: $bindValues = ["\x74\151\164\x6c\x65" => $templateInfos["\x74\x69\x74\154\145"], "\164\x65\155\160\x6c\141\164\145" => $templateInfos["\164\145\155\160\x6c\x61\x74\145"]]; goto amkJt; Jymp0: return ajaxSuccess("\346\223\x8d\344\xbd\x9c\346\210\220\xe5\x8a\x9f"); goto rvjIy; iPioU: $this->assign("\165\162\154\110\x72\x65\146\163", $urlHrefs); goto dp7b0; uXmUY: $title = input("\160\157\163\164\56\164\x69\x74\x6c\x65"); goto chvUl; chvUl: $template = input("\x70\157\163\164\x2e\x74\x65\x6d\160\x6c\x61\164\145"); goto sjmgN; sjmgN: $templatesLogic->editTemplate($templateId, $title, $template); goto Jymp0; dp7b0: $templateInfos = $templatesLogic->getTemplate($templateId); goto EyNSl; fwDSZ: return $this->fetch(); goto dwe6d; o8aOi: if (!request()->isGet()) { goto n3HNr; } goto pEpXE; amkJt: $this->assign("\x62\x69\x6e\144\x56\x61\154\165\145\x73", $bindValues); goto fwDSZ; pEpXE: $urlHrefs = ["\x75\160\x6c\157\141\x64\111\155\141\x67\145" => url("\125\160\154\157\x61\144\57\x75\160\154\157\141\144\111\x6d\x61\147\145\106\x72\x6f\x6d\x43\x4b\105\x64\x69\164\157\162")]; goto iPioU; rvjIy: } public function templatesDelete($templateId) { $templatesLogic = TemplatesLogic::I(); try { $templatesLogic->deleteTemplate($templateId); return ajaxSuccess("\346\223\x8d\xe4\xbd\x9c\346\210\x90\xe5\212\x9f"); } catch (\Exception $e) { return ajaxError($e->getMessage()); } } public function templatesMakeDefault($templateId) { goto OZcLN; IpvqQ: return ajaxSuccess("\346\x93\215\xe4\xbd\234\346\x88\220\345\x8a\237"); goto pvnxd; AxahA: $templatesLogic->makeDefaultTemplate($templateId); goto IpvqQ; OZcLN: $templatesLogic = TemplatesLogic::I(); goto AxahA; pvnxd: } public function templatesMakeSystem($templateId) { goto Ox2Mc; MoRi1: return ajaxSuccess("\xe6\x93\215\344\xbd\x9c\xe6\x88\220\xe5\x8a\x9f"); goto npULP; Ox2Mc: $templatesLogic = TemplatesLogic::I(); goto vY1LK; vY1LK: $templatesLogic->makeSystemTemplate($templateId); goto MoRi1; npULP: } public function templatesPreview($templateId) { return $this->fetch(); } }
